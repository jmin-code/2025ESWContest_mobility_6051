<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>좌표를 주소로 동적 변환</title>
    <style>html, body, #map { margin: 0; padding: 0; width: 100%; height: 100%; }</style>
</head>
<body>
    <div id="map"></div>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=dc0607361ea2324be6bd1e9dc3f262fe&libraries=services"></script>
    <script>
        kakao.maps.load(() => {
            const params = new URLSearchParams(window.location.search);
            const lat = parseFloat(params.get('lat') || '37.4507');
            const lng = parseFloat(params.get('lng') || '126.6569');

            const locationCoords = new kakao.maps.LatLng(lat, lng);
            const map = new kakao.maps.Map(document.getElementById('map'), {
                center: locationCoords,
                level: 3
            });

            const geocoder = new kakao.maps.services.Geocoder();
            geocoder.coord2Address(lng, lat, (result, status) => {
                if (status === kakao.maps.services.Status.OK) {
                    const detailAddr = result[0].road_address ?
                        `도로명: ${result[0].road_address.address_name}` :
                        `지번: ${result[0].address.address_name}`;

                    const infowindow = new kakao.maps.InfoWindow({
                        content: `<div style="padding:5px;text-align:center;">${detailAddr}</div>`
                    });
                    infowindow.open(map, new kakao.maps.Marker({ map, position: locationCoords }));
                }
            });
        });
    </script>
</body>
</html>