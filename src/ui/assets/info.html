<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>동적 정보 시각화</title>
    <style>
        html, body, #map { margin: 0; padding: 0; width: 100%; height: 100%; }
        .info-title { font-weight: bold; padding: 5px 10px; }
        .info-body { padding: 0 10px 5px; font-size: 12px; color: #555; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=dc0607361ea2324be6bd1e9dc3f262fe&libraries=services"></script>
    <script>
        kakao.maps.load(() => {
            const params = new URLSearchParams(window.location.search);
            const keyword = params.get('keyword') || '인하대학교';

            document.title = `'${keyword}' 정보`;
            
            const map = new kakao.maps.Map(document.getElementById('map'), {
                center: new kakao.maps.LatLng(37.5665, 126.9780), // 초기 위치: 서울 시청
                level: 3
            });
            
            const ps = new kakao.maps.services.Places();
            ps.keywordSearch(keyword, (data, status) => {
                if (status === kakao.maps.services.Status.OK && data.length > 0) {
                    const place = data[0];
                    const placePosition = new kakao.maps.LatLng(place.y, place.x);

                    map.setCenter(placePosition);

                    const marker = new kakao.maps.Marker({
                        position: placePosition,
                        map: map
                    });

                    const content = `
                        <div class="info-title">${place.place_name}</div>
                        <div class="info-body">
                            ${place.road_address_name || place.address_name}<br>
                            전화: ${place.phone || '정보 없음'}
                        </div>
                    `;
                    
                    const infowindow = new kakao.maps.InfoWindow({
                        content: content,
                        removable: true
                    });

                    kakao.maps.event.addListener(marker, 'click', () => {
                        infowindow.open(map, marker);
                    });
                    
                    infowindow.open(map, marker);

                } else {
                    alert(`'${keyword}'에 대한 검색 결과가 없습니다.`);
                }
            });
        });
    </script>
</body>
</html>